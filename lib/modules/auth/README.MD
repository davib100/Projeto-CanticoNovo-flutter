# ğŸ” Auth Module - CÃ¢ntico Novo

MÃ³dulo de autenticaÃ§Ã£o completo com suporte a OAuth e gerenciamento de sessÃ£o seguro.

## âœ¨ Funcionalidades

- âœ… Login com email/senha
- âœ… Login com Google OAuth
- âœ… Registro de usuÃ¡rios
- âœ… RedefiniÃ§Ã£o de senha
- âœ… SessÃ£o persistente com refresh tokens rotativos
- âœ… Single-device enforcement
- âœ… Criptografia de tokens com `flutter_secure_storage`
- âœ… ValidaÃ§Ã£o robusta de formulÃ¡rios
- âœ… Indicador de forÃ§a de senha
- âœ… Logs estruturados para observabilidade

## ğŸ—ï¸ Arquitetura

auth/
â”œâ”€ auth_module.dart                    # Registro do mÃ³dulo
â”œâ”€ screens/ 
â”‚  â”œâ”€â”€ login_screen.dart
â”‚  â”œâ”€â”€ register_screen.dart
â”‚  â””â”€â”€ reset_password_screen.dart
â”œâ”€â”€ widgets/
â”‚   â”œâ”€â”€ auth_header.dart
â”‚   â”œâ”€â”€ social_auth_button.dart
â”‚   â”œâ”€â”€ password_strength_indicator.dart
â”‚   â””â”€â”€ auth_text_field.dart
â”œâ”€â”€ providers/
â”‚   â””â”€â”€ auth_provider.dart
â”œâ”€â”€ entities/
â”‚   â””â”€â”€ user_entity.dart
â”‚  â”œâ”€â”€ repositories/
â”‚  â”‚   â””â”€â”€ auth_repository.dart
â”‚  â””â”€â”€ auth_repository_impl.dart
â”œâ”€â”€â”€ usecases/
â”‚    â”œâ”€â”€ login_usecase.dart
â”‚    â”œâ”€â”€ register_usecase.dart
â”‚    â”œâ”€â”€ logout_usecase.dart
â”‚    â””â”€â”€ reset_password_usecase.dart
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user_model.dart
â”‚   â””â”€â”€ session_model.dart
â”œâ”€â”€ datasources/
â”‚   â”œâ”€â”€ auth_remote_datasource.dart
â”‚   â””â”€â”€ auth_local_datasource.dart
â””â”€â”€ repositories/
â”‚      
â””â”€ core/
   â”œâ”€â”€ auth_constants.dart
   â””â”€â”€ auth_validators.dart


## ğŸ”„ Fluxo de AutenticaÃ§Ã£o

1. **Login** â†’ Backend valida â†’ Retorna token JWT + refresh token
2. **Token** salvo no `flutter_secure_storage`
3. **Session** salva no SQLite local
4. **DeviceId** validado no backend (single-device)
5. **Refresh automÃ¡tico** quando token expira

## ğŸ”’ SeguranÃ§a

- Tokens JWT com expiraÃ§Ã£o de 1 hora
- Refresh tokens rotativos (30 dias)
- Criptografia AES-256 nativa do sistema
- Single-device enforcement
- Logout remoto via backend

## ğŸ“Š Observabilidade

Todos os eventos sÃ£o logados:
- Tentativas de login (sucesso/falha)
- Registro de usuÃ¡rios
- RedefiniÃ§Ã£o de senha
- Logout e revogaÃ§Ã£o de sessÃ£o

## ğŸ§ª Testes

flutter test modules/auth/test


## ğŸ“ Uso

// Login
final result = await ref.read(authStateProvider.notifier).login(
email: 'user@example.com',
password: 'SecurePass123',
);

// Registro
final result = await ref.read(authStateProvider.notifier).register(
fullName: 'JoÃ£o Silva',
email: 'joao@example.com',
password: 'SecurePass123',
);

// Logout
await ref.read(authStateProvider.notifier).logout();

## ğŸ”— IntegraÃ§Ã£o com Backend

Endpoints esperados:

- `POST /auth/login` - AutenticaÃ§Ã£o
- `POST /auth/register` - Registro
- `POST /auth/google` - OAuth Google
- `POST /auth/reset-password` - Redefinir senha
- `POST /auth/refresh` - Renovar token
- `POST /auth/logout` - Encerrar sessÃ£o

---

**Desenvolvido para o projeto CÃ¢ntico Novo** ğŸµ
